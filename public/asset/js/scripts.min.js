"use strict";var scrollbarWidth=window.innerWidth-document.documentElement.clientWidth;function openPopupOverlay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;$(".pace-popup-overlay").length||($("body").append('<div class="pace-popup-overlay"></div>'),$("body").addClass("is-lock").css("paddingRight",scrollbarWidth),$(".pace-popup-overlay").fadeIn(e))}function closePopupOverlay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;$(".pace-popup-overlay").fadeOut(e),setTimeout((function(){$(".pace-popup-overlay").remove()}),e),$("body").removeClass("is-lock").css("padding-right","")}function getRootVars(){document.querySelector(":root").style.setProperty("--vh",window.innerHeight/100+"px")}function initWooSelect2(){$(".pace-form-group select").select2({width:"100%"})}!function(e){function t(){e(".lazy").Lazy({afterLoad:function(t){var n;e(t).css("visibility","visible"),n=window.navigator.userAgent,/msie|Trident.*rv[ :]*11\./gi.test(n)&&e(".pace-img-drop").each((function(){var t=e(this),n=e(this).find("img").attr("src"),o=e(this).find("source").attr("srcset"),r=o||n;r&&t.css("backgroundImage","url("+r+")").addClass("custom-object-fit")}))}})}e.pace_noti=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;e(".pace-noti").length||(e("body").append('<div class="pace-noti">'+t+"</div>"),setTimeout((function(){e(".pace-noti").addClass("opening")}),10),setTimeout((function(){e(".pace-noti").removeClass("opening")}),n),setTimeout((function(){e(".pace-noti").remove()}),n+400))},e((function(){getRootVars(),t(),e(".ginput_container_select select").select2({width:"100%",minimumResultsForSearch:-1}),e("[data-popup-target]").on("click",(function(t){t.prepacetDefault();var n=e(this).data("popup-target"),o=e('[data-popup-content="'+n+'"]');0!=o.length&&(o.addClass("is-active"),openPopupOverlay())})),e("[data-popup-close]").on("click",(function(t){t.prepacetDefault(),e(this).closest("[data-popup-content]").removeClass("is-active"),closePopupOverlay()})),e(document).on("click",".pace-popup-overlay",(function(t){e("[data-popup-content]").removeClass("is-active"),closePopupOverlay()})),e("#wpadminbar").length&&e(".js-pace-navbar").length&&e(window).width()<=600&&e(window).on("scroll",(function(){var t=e(window).scrollTop(),n=46-t>0?46-t:0;e(".js-pace-navbar").css("margin-top",n)}))})),e(window).on("resize",(function(){getRootVars()}))}(jQuery),function(e){e((function(){e(".pace-cart-popup__inner").addClass("scrollbar-macosx").scrollbar()}))}(jQuery),function(e){e((function(){e("#enable-admin-bar").on("change",(function(){function t(){var t=e(window).scrollTop(),n=46-t>0?46-t:0;e("#wpadminbar").length&&e(".js-pace-navbar").length?e(".js-pace-navbar").css("margin-top",n):e(".js-pace-navbar").css("margin-top","")}e(this).prop("checked")?(e("html").addClass("admin-bar-html"),e("body").append('<div id="wpadminbar">WP Admin bar</div>').addClass("admin-bar")):(e("html").removeClass("admin-bar-html"),e("body").removeClass("admin-bar"),e("#wpadminbar").remove(),e(".js-pace-navbar").css("margin-top","")),e(window).width()<=600&&(t(),e(window).on("scroll",(function(){t()})))}))}))}(jQuery),function(e){e((function(){var t;e(".navbar-toggler").on("click",(function(){e(this).toggleClass("show"),e(".navbar").toggleClass("show"),e("body").toggleClass("is-lock")})),t=e(".navbar"),e(window).on("scroll",(function(){e(window).scrollTop()>t.outerHeight()?t.addClass("is-active"):t.removeClass("is-active")}))}))}(jQuery),function($){function epacetChangeQuanlity(){$(document).on("click","body.woocommerce-cart .pace-box-quantity .pace-box-quantity__minus",(function(){var qtyBox=$(this).closest(".pace-box-quantity"),qty=qtyBox.find("input").val();qty=eval(qty)>1?eval(qty)-1:1,qtyBox.find("input").val(qty),triggerUpdateCart()})),$(document).on("click","body.woocommerce-cart .pace-box-quantity .pace-box-quantity__plus",(function(){var qtyBox=$(this).closest(".pace-box-quantity"),qtyMax=qtyBox.find("input").attr("max");""==qtyMax&&(qtyMax=999);var qty=qtyBox.find("input").val();qty=eval(qty)<0?1:eval(qty)<eval(qtyMax)?eval(qty)+1:qty,qtyBox.find("input").val(qty),triggerUpdateCart()})),$(document).on("change","body.woocommerce-cart .pace-box-quantity input",(function(){$(this).val()<1&&$(this).val(1),triggerUpdateCart()}))}function triggerUpdateCart(){$("#update_cart").removeAttr("disabled"),$("#update_cart").trigger("click")}$((function(){epacetChangeQuanlity()}))}(jQuery),function(e){e("#checkout-order-trigger"),e(".pace-checkout__content");var t=0;function n(){e(document).on("click",".checkout-next-step-trigger",(function(){var n=e(this).closest(".pace-checkout-steps__item"),o=e(".pace-checkout-steps__form",n),r=e(".pace-checkout-steps__data",n);if("shipping"==n.data("type")){if(t=0,e('.pace-checkout-steps__item[data-type="shipping"] .validate-required').length>0&&e('.pace-checkout-steps__item[data-type="shipping"] .validate-required').each((function(){var n=e(this);t=e.validateInput(n,t)})),t>0)return void e(".show-shipping-normal").trigger("click");var i=e("#shipping_first_name").val(),a=e("#shipping_last_name").val(),s=e("#shipping_company").val(),c=e("#shipping_phone").val(),d=e("#shipping_address_1").val(),l=e("#shipping_city").val(),p=e("#shipping_postcode").val(),m=e("#shipping_state :selected").text();if(e("#shipping_country").is("input"))var u=e("#shipping_country").closest(".woocommerce-input-wrapper").find("strong").text();else u=e("#shipping_country :selected").text();var v=d+(d.length>0?", ":"")+l+(l.length>0?", ":"")+m+(m.length>0&&p.length<1?", ":" ")+p+(p.length>0?", ":"")+u,_=i+" "+a;e("#shipping-info").html(_+(s.length>0?"<br>"+s:s)+"<br>"+v+"<br>"+c),e(document.body).trigger("update_checkout")}else if("shipping-method"==n.data("type")&&e(".shipping_method:checked").length>0){var h=e(".shipping_method:checked").closest(".pace-checkout-delivery__item").find("label .pace-checkout-delivery__title").length>0?e(".shipping_method:checked").closest(".pace-checkout-delivery__item").find("label .pace-checkout-delivery__title").html():"",g=e(".shipping_method:checked").closest(".pace-checkout-delivery__item").find("label .pace-checkout-delivery__price").length>0?e(".shipping_method:checked").closest(".pace-checkout-delivery__item").find("label .pace-checkout-delivery__price").html():"",f=e(".shipping_method:checked").closest(".pace-checkout-delivery__item").find("label .pace-checkout-delivery__description").length>0?e(".shipping_method:checked").closest(".pace-checkout-delivery__item").find("label .pace-checkout-delivery__description").html():"";e("#shipping-method-review").html(h+" "+(f.length>0?"("+f+") ":"")+g)}!function(t,n,o){t.addClass("is-checked"),e(".pace-checkout-steps__item.is-checked").last().next().find(".pace-checkout-steps__body").slideDown(300),n.slideUp(300),o.slideDown(300),e(".pace-checkout-steps__item").removeClass("is-current"),e(".pace-checkout-steps__item.is-checked").last().next().addClass("is-current")}(n,o,r)})),e(document).on("click",".checkout-edit-step-trigger",(function(){var t=e(this).closest(".pace-checkout-steps__item");!function(t,n,o){e(".pace-checkout-steps__item").removeClass("is-current"),e('.pace-checkout-steps__item:not(".is-checked")').find(".pace-checkout-steps__body:visible").slideUp(300),e(".pace-checkout-steps__item.is-checked .pace-checkout-steps__data").show(),e(".pace-checkout-steps__item.is-checked .pace-checkout-steps__form").hide(),t.addClass("is-current"),n.slideDown(300),o.slideUp(300)}(t,e(".pace-checkout-steps__form",t),e(".pace-checkout-steps__data",t))}))}function o(){e(".show-shipping-normal").on("click",(function(t){var n;t.prepacetDefault(),e(n="#shipping_state").is("select")&&e(n).select2({width:"100%",minimumResultsForSearch:-1}),e(".pace-form-manual").removeClass("d-none"),e("#shipping_address_google").closest(".form-row").addClass("d-none"),e(".pace-checkout-shipping-information").remove(),e(".gfield, .pace-form-group, .woocommerce-form-row").each((function(){var t=e(this),n=t.find("input, textarea"),o=t.find("label");function r(){n.val().length>0?o.addClass("freeze"):o.removeClass("freeze")}n.focus((function(){o.addClass("freeze")})),n.focusout((function(){r()})),n.val()&&n.val().length&&o.addClass("freeze"),n.change((function(){r()}))}))}))}function r(){e(".pace-form-group select").closest(".pace-form-group").addClass("has-select");var t=e("#shipping_country").val(),n=e("#shipping_state").val();e("#checkout-billing-address:checked").length>0&&(e("#billing_country").val(t).trigger("change"),e("#billing_state").val(n).trigger("change"))}e((function(){var t,i,a,s,c;e("#google-map").length>0&&e("#google-map").attr("src",e("#google-map").attr("data-src")),e("#google-map").on("load",(function(){var t,n;(t=e("#shipping_address_google")).length<1||(function(t){var o=t.addEpacetListener?t.addEpacetListener:t.attachEpacet;function r(n,r){if("keydown"==n){var i=r;r=function(n){var o=e(".pac-item-selected").length>0;if(13==n.which&&!o){var r=e.Epacet("keydown",{keyCode:40,which:40});i.apply(t,[r])}i.apply(t,[n])}}o.apply(t,[n,r])}t.addEpacetListener=r,t.attachEpacet=r,n=new google.maps.places.Autocomplete(t,{componentRestrictions:{country:e("#shipping_country").length>0?e("#shipping_country").val():"au"}})}(t[0]),n.addListener("place_changed",(function(){var t=n.getPlace();if(t.adr_address,t.formatted_address,t.name,t.geometry){for(var o,r,i,a,s,c,d,l,p,m="",u=0;u<t.address_components.length;u++){var v=t.address_components[u].types[0];"premise"==v?o=t.address_components[u].long_name:"subpremise"==v?r=t.address_components[u].long_name:"street_number"==v?i=t.address_components[u].long_name:"route"==v?a=t.address_components[u].long_name:"locality"==v?s=t.address_components[u].long_name:"administrative_area_level_1"==v?(c=t.address_components[u].long_name,d=t.address_components[u].short_name):"administrative_area_level_2"==v?(l=t.address_components[u].long_name,t.address_components[u].short_name):"postal_code"==v?p=t.address_components[u].long_name:"country"==v&&(t.address_components[u].long_name,t.address_components[u].short_name)}void 0!==r&&(m+=r+"/"),void 0!==o&&(m+=o+" "),void 0!==i&&(m+=i+" "),void 0!==a&&(m+=a),e("#shipping_address_1").val(m),e("#shipping_address_2").length>0&&e("#shipping_address_2").val(""),"display: block;"==e("#shipping_state_field").attr("style")?void 0!==c&&(e("#shipping_state").is("input")?e("#shipping_state").val(c):e("#shipping_state").val(d).trigger("change")):void 0!==c?(void 0!==l&&(c=c.length>0?l+", "+c:l),e("#shipping_city").val(c)):e("#shipping_city").val(""),void 0!==s&&e("#shipping_city").val(s),void 0!==p?e("#shipping_postcode").val(p):e("#shipping_postcode").val("")}})),e(document).on("change","#shipping_country",(function(){""!=e(this).val()&&(r(),n.setComponentRestrictions({country:e(this).val()}))})),e(document).on("change","#shipping_state",(function(){""!=e(this).val()&&r()})))})),(t=e(".pace-checkout-terms-box")).length&&(t.addClass("scrollbar-macosx"),t.scrollbar()),n(),i=e("#checkout-billing-address"),a=e(".pace-checkout-billing__body"),i.prop("checked")&&r(),i.prop("checked")?a.hide():a.show(),i.on("change",(function(){i.prop("checked")?a.slideUp(300):a.slideDown(300)})),s=e(".pace-checkout__summary"),c=e(".pace-checkout__sidebar"),s.on("click",(function(){e(this).toggleClass("is-active"),e(this).hasClass("is-active")?c.stop().slideDown(300):c.stop().slideUp(300)})),r(),e(document).on("click","#btn_coupon_code_edit",(function(t){t.prepacetDefault();var n=e("#coupon_code_edit").val(),o=e("form.woocommerce-form-coupon-edit").data("url")+"/?wc-ajax=apply_coupon",r=e("form.woocommerce-form-coupon-edit").data("nonce");n.length<1||e.post(o,{coupon_code:n,security:r},(function(t){e(document.body).trigger("update_checkout"),e.pace_noti(t,3e3)}))})),o(),e(".continue-as-guest").click((function(){e(".pace-user-form").addClass("d-none"),e(".checkout.woocommerce-checkout").removeClass("d-none")})),e(".checkout-login-target").on("click",(function(t){t.prepacetDefault();var n=e(this).attr("href");e(".pace-checkout-login.is-active").removeClass("is-active"),e(n).addClass("is-active")}))}))}(jQuery),function(e){var t,n,o,r,i,a=!1;t=document,n="script",o="facebook-jssdk",i=t.getElementsByTagName(n)[0],t.getElementById(o)||((r=t.createElement(n)).id=o,r.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(r,i)),window.fbAsyncInit=function(){FB.init({appId:"3349125235150681",cookie:!0,xfbml:!0,version:"v5.0"})},e((function(){e(".ec-btn-facebook").on("click",(function(){a||(a=!0,FB.login((function(t){"connected"===t.status&&FB.api("/me",{fields:"id,name,first_name,last_name,picture,verified,email"},(function(t){var n="",o="",r="",i="",s="",c="";return void 0===t.id?(console.log("Can not get provide id "),a=!1,!1):(n=t.id,void 0!==t.first_name&&(o=t.first_name),void 0!==t.last_name&&(r=t.last_name),void 0!==t.name&&(i=t.name),void 0===t.email?(console.log("Can not get provide id "),a=!1,!1):(s=t.email,void 0!==t.picture.data.url&&(c=t.picture.data.url),void jQuery.ajax({url:wp_vars.rest_url+"api/v1/auth/register",type:"POST",cache:!1,data:{type:"facebook",id:n,first_name:o,last_name:r,display_name:i,email:s,picture:c}}).done((function(e){location.reload()})).fail((function(t){a=!1;var n=void 0!==t.responseJSON.message?t.responseJSON.message:"";""!==n&&e.pace_noti(n,3e3)}))))}))}),{scope:"public_profile,email"}))})),e("#form-login").on("submit",(function(t){t.prepacetDefault();var n=e(this),o="",r=n.find('input[name="email"]'),i=n.find('input[name="password"]');if(n.find(".pace-form-group--error").removeClass("pace-form-group--error"),n.find(".invalid-message").remove(),""==r.val())return o="Email address is required.",r.closest(".pace-form-group").addClass("pace-form-group--error"),r.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;if(!/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r.val()))return o="Please enter a valid email address.",r.closest(".pace-form-group").addClass("pace-form-group--error"),r.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;if(""==i.val())return o="Password is required.",i.closest(".pace-form-group").addClass("pace-form-group--error"),i.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;var a=n.serialize();e.ajax({url:wp_vars.rest_url+"api/v1/auth/login",type:"POST",dataType:"json",cache:!1,data:a,beforeSend:function(e){n.find(".is-loading").removeClass("is-loading"),n.find("button").addClass("is-loading")}}).done((function(e){var t={};n.serializeArray().map((function(e){t[e.name]=e.value})),n.find(".is-loading").removeClass("is-loading");var o=void 0!==t.url_referer&&""!=t.url_referer?t.url_referer:"";""!=o?window.location.href=o:location.reload()})).fail((function(t){n.find(".is-loading").removeClass("is-loading");var o=void 0!==t.responseJSON.message?t.responseJSON.message:"";""!==o&&e.pace_noti(o,3e3)}))}))}))}(jQuery),function(e){e((function(){e("#form-register").length<1||e("#form-register").on("submit",(function(t){t.prepacetDefault();var n=e(this),o="",r=n.find('input[name="email"]'),i=n.find('input[name="password"]'),a=n.find('input[name="conf-password"]');if(n.find(".pace-form-group--error").removeClass("pace-form-group--error"),n.find(".invalid-message").remove(),""==r.val())return o="Email address is required.",r.closest(".pace-form-group").addClass("pace-form-group--error"),r.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;if(!/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r.val()))return o="Please enter a valid email address.",r.closest(".pace-form-group").addClass("pace-form-group--error"),r.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;if(""==i.val())return o="Password is required.",i.closest(".pace-form-group").addClass("pace-form-group--error"),i.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;if(""==a.val())return o="Confirm password is required.",a.closest(".pace-form-group").addClass("pace-form-group--error"),a.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;if(a.val()!=i.val())return o="Password and confirm password does not match",a.closest(".pace-form-group").addClass("pace-form-group--error"),a.closest(".pace-form-group").append('<div class="invalid-message">'+o+"</div>"),!1;var s=n.serialize();e.ajax({url:wp_vars.rest_url+"api/v1/auth/register",type:"POST",dataType:"json",cache:!1,data:s,beforeSend:function(e){n.find(".is-loading").removeClass("is-loading"),n.find("button").addClass("is-loading")}}).done((function(e){var t={};n.serializeArray().map((function(e){t[e.name]=e.value}));var o=void 0!==t.url_referer&&""!=t.url_referer?t.url_referer:"";n.find(".is-loading").removeClass("is-loading"),""!=o?window.location.href=o:location.reload()})).fail((function(t){n.find(".is-loading").removeClass("is-loading");var o=void 0!==t.responseJSON.message?t.responseJSON.message:"";""!==o&&e.pace_noti(o,3e3)}))}))}))}(jQuery),jQuery((function(){})),jQuery((function(){initWooSelect2()})),function($){function epacetChangeQuanlity(){$(document).on("click","form.cart .pace-box-quantity .pace-box-quantity__minus",(function(){var qtyBox=$(this).closest(".pace-box-quantity"),qty=qtyBox.find("input").val();qty=eval(qty)>1?eval(qty)-1:1,qtyBox.find("input").val(qty)})),$(document).on("click","form.cart .pace-box-quantity .pace-box-quantity__plus",(function(){var qtyBox=$(this).closest(".pace-box-quantity"),qtyMax=qtyBox.find("input").attr("max");""==qtyMax&&(qtyMax=999);var qty=qtyBox.find("input").val();qty=eval(qty)<0?1:eval(qty)<eval(qtyMax)?eval(qty)+1:qty,qtyBox.find("input").val(qty)}))}function addToCart(){$("form.cart").length<1||$("form.cart").on("submit",(function(e){e.prepacetDefault();var t=$(this),n=t.serialize();$.ajax({url:wp_vars.home_url+"/?wc-ajax=add_to_cart",type:"POST",cache:!1,data:n,beforeSend:function(e){t.find('button[type="submit"]').addClass("is-loading")}}).done((function(e){if(t.find('button[type="submit"]').removeClass("is-loading"),e.error&&1==e.error){var n="This product cannot be added to cart";$.pace_noti(n,3e3)}else{$(document.body).trigger("wc_fragment_refresh"),t.find(".pace-btn-add-cart").addClass("is-active"),setTimeout((function(){t.find(".pace-btn-add-cart").removeClass("is-active")}),2e3);var o=void 0!==e.data.title?e.data.title:"";if(""!=o)$("#cart-notification-content .text-gradient").html(o),showCartNotification();else{n="This product added to cart.";$.pace_noti(n,3e3)}}})).fail((function(e){var n=void 0!==e.responseJSON.data.message?e.responseJSON.data.message:"This product cannot be added to cart",o=$('<div class="message-element">'+n+"</div>");o.find("a").remove(),n=o.text(),t.find('button[type="submit"]').removeClass("is-loading"),$.pace_noti(n,3e3)}))}))}function buyNow(){$("form.cart").length<1||$(document).on("click","form.cart .btn-buy-now",(function(e){e.prepacetDefault();var t=$(this),n=t.closest("form.cart"),o=t.data("redirect"),r={action:"pace_add_to_cart",quantity:1,product_id:n.find('input[name="product_id"]').val()};$.ajax({url:wp_vars.home_url+"/?wc-ajax=add_to_cart",type:"POST",cache:!1,data:r,beforeSend:function(e){t.addClass("is-loading")}}).done((function(e){if(""!=o)window.location.href=o;else{t.removeClass("is-loading");var n=void 0!==e.data.title?e.data.title:"";if(""!=n)$("#cart-notification-content .text-gradient").html(n);else{$.pace_noti("This product added to cart.",3e3)}}})).fail((function(e){t.removeClass("is-loading");var n=void 0!==e.responseJSON.data.message?e.responseJSON.data.message:"This product cannot be added to cart",o=$('<div class="message-element">'+n+"</div>");o.find("a").remove(),n=o.text(),$.pace_noti(n,3e3)}))}))}$((function(){epacetChangeQuanlity(),addToCart(),buyNow()}))}(jQuery),jQuery((function(e){if("undefined"!=typeof wc_stripe_params){try{var t=Stripe(wc_stripe_params.key)}catch(e){return void console.log(e)}var n,o,r,i=Object.keys(wc_stripe_params.elements_options).length?wc_stripe_params.elements_options:{},a=Object.keys(wc_stripe_params.sepa_elements_options).length?wc_stripe_params.sepa_elements_options:{},s=t.elements(i),c=s.create("iban",a),d={getAjaxURL:function(e){return wc_stripe_params.ajaxurl.toString().replace("%%endpoint%%","wc_stripe_"+e)},unmountElements:function(){"yes"===wc_stripe_params.inline_cc_form?n.unmount("#stripe-card-element"):(n.unmount("#stripe-card-element"),o.unmount("#stripe-exp-element"),r.unmount("#stripe-cvc-element"))},mountElements:function(){if(e("#stripe-card-element").length){if("yes"===wc_stripe_params.inline_cc_form)return n.mount("#stripe-card-element");n.mount("#stripe-card-element"),o.mount("#stripe-exp-element"),r.mount("#stripe-cvc-element")}},createElements:function(){var t={base:{iconColor:"#666EE8",color:"#31325F",fontSize:"15px","::placeholder":{color:"#CFD7E0"}}},i={focus:"focused",empty:"empty",invalid:"invalid"};t=wc_stripe_params.elements_styling?wc_stripe_params.elements_styling:t,i=wc_stripe_params.elements_classes?wc_stripe_params.elements_classes:i,"yes"===wc_stripe_params.inline_cc_form?(n=s.create("card",{style:t,hidePostalCode:!0})).addEpacetListener("change",(function(t){d.onCCFormChange(),t.error&&e(document.body).trigger("stripeError",t)})):(n=s.create("cardNumber",{style:t,classes:i}),o=s.create("cardExpiry",{style:t,classes:i}),r=s.create("cardCvc",{style:t,classes:i}),n.addEpacetListener("change",(function(t){d.onCCFormChange(),d.updateCardBrand(t.brand),t.error&&e(document.body).trigger("stripeError",t)})),o.addEpacetListener("change",(function(t){d.onCCFormChange(),t.error&&e(document.body).trigger("stripeError",t)})),r.addEpacetListener("change",(function(t){d.onCCFormChange(),t.error&&e(document.body).trigger("stripeError",t)}))),"yes"===wc_stripe_params.is_checkout?e(document.body).on("updated_checkout",(function(){e("#stripe-card-element").children().length||(n&&d.unmountElements(),d.mountElements(),e("#stripe-iban-element").length&&c.mount("#stripe-iban-element"))})):(e("form#add_payment_method").length||e("form#order_review").length)&&(d.mountElements(),e("#stripe-iban-element").length&&c.mount("#stripe-iban-element"))},updateCardBrand:function(t){var n={visa:"stripe-visa-brand",mastercard:"stripe-mastercard-brand",amex:"stripe-amex-brand",discover:"stripe-discover-brand",diners:"stripe-diners-brand",jcb:"stripe-jcb-brand",unknown:"stripe-credit-card-brand"},o=e(".stripe-card-brand"),r="stripe-credit-card-brand";t in n&&(r=n[t]),e.each(n,(function(e,t){o.removeClass(t)})),o.addClass(r)},init:function(){"yes"!==wc_stripe_params.is_change_payment_page&&"yes"!==wc_stripe_params.is_pay_for_order_page||e(document.body).trigger("wc-credit-card-form-init"),e("form.woocommerce-checkout").length&&(this.form=e("form.woocommerce-checkout")),e("form.woocommerce-checkout").on("checkout_place_order_stripe checkout_place_order_stripe_bancontact checkout_place_order_stripe_sofort checkout_place_order_stripe_giropay checkout_place_order_stripe_ideal checkout_place_order_stripe_alipay checkout_place_order_stripe_sepa",this.onSubmit),e("form#order_review").length&&(this.form=e("form#order_review")),e("form#order_review, form#add_payment_method").on("submit",this.onSubmit),e("form#add_payment_method").length&&(this.form=e("form#add_payment_method")),e("form.woocommerce-checkout").on("change",this.reset),e(document).on("stripeError",this.onError).on("checkout_error",this.reset),c.on("change",this.onSepaError),e("#check-stripe-payment-method").on("click",this.getCardReview),e("#early_renewal_modal_submit").on("click",this.onEarlyRenewalSubmit),d.createElements(),window.addEpacetListener("hashchange",d.onHashChange),d.maybeConfirmIntent()},isStripeChosen:function(){return e("#payment_method_stripe, #payment_method_stripe_bancontact, #payment_method_stripe_sofort, #payment_method_stripe_giropay, #payment_method_stripe_ideal, #payment_method_stripe_alipay, #payment_method_stripe_sepa, #payment_method_stripe_eps, #payment_method_stripe_multibanco").is(":checked")||e("#payment_method_stripe").is(":checked")&&"new"===e('input[name="wc-stripe-payment-token"]:checked').val()||e("#payment_method_stripe_sepa").is(":checked")&&"new"===e('input[name="wc-stripe-payment-token"]:checked').val()},isStripeSaveCardChosen:function(){return e("#payment_method_stripe").is(":checked")&&e('input[name="wc-stripe-payment-token"]').is(":checked")&&"new"!==e('input[name="wc-stripe-payment-token"]:checked').val()||e("#payment_method_stripe_sepa").is(":checked")&&e('input[name="wc-stripe_sepa-payment-token"]').is(":checked")&&"new"!==e('input[name="wc-stripe_sepa-payment-token"]:checked').val()},isStripeCardChosen:function(){return e("#payment_method_stripe").is(":checked")},isBancontactChosen:function(){return e("#payment_method_stripe_bancontact").is(":checked")},isGiropayChosen:function(){return e("#payment_method_stripe_giropay").is(":checked")},isIdealChosen:function(){return e("#payment_method_stripe_ideal").is(":checked")},isSofortChosen:function(){return e("#payment_method_stripe_sofort").is(":checked")},isAlipayChosen:function(){return e("#payment_method_stripe_alipay").is(":checked")},isSepaChosen:function(){return e("#payment_method_stripe_sepa").is(":checked")},isP24Chosen:function(){return e("#payment_method_stripe_p24").is(":checked")},isEpsChosen:function(){return e("#payment_method_stripe_eps").is(":checked")},isMultibancoChosen:function(){return e("#payment_method_stripe_multibanco").is(":checked")},hasSource:function(){return 0<e("input.stripe-source").length},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},block:function(){d.isMobile()||d.form.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){d.form&&d.form.unblock()},getSelectedPaymentElement:function(){return e('.payment_methods input[name="payment_method"]:checked')},getOwnerDetails:function(){var t=e("#billing_first_name").length?e("#billing_first_name").val():wc_stripe_params.billing_first_name,n=e("#billing_last_name").length?e("#billing_last_name").val():wc_stripe_params.billing_last_name,o={name:"",address:{},email:"",phone:""};return o.name=t,o.name=t&&n?t+" "+n:e("#stripe-payment-data").data("full-name"),o.email=e("#billing_email").val(),o.phone=e("#billing_phone").val(),(void 0===o.phone||0>=o.phone.length)&&delete o.phone,(void 0===o.email||0>=o.email.length)&&(e("#stripe-payment-data").data("email").length?o.email=e("#stripe-payment-data").data("email"):delete o.email),(void 0===o.name||0>=o.name.length)&&delete o.name,o.address.line1=e("#billing_address_1").val()||wc_stripe_params.billing_address_1,o.address.line2=e("#billing_address_2").val()||wc_stripe_params.billing_address_2,o.address.state=e("#billing_state").val()||wc_stripe_params.billing_state,o.address.city=e("#billing_city").val()||wc_stripe_params.billing_city,o.address.postal_code=e("#billing_postcode").val()||wc_stripe_params.billing_postcode,o.address.country=e("#billing_country").val()||wc_stripe_params.billing_country,{owner:o}},createSource:function(){var o=d.getOwnerDetails();return d.isSepaChosen()?(o.currency=e("#stripe-sepa_debit-payment-data").data("currency"),o.mandate={notification_method:wc_stripe_params.sepa_mandate_notification},o.type="sepa_debit",t.createSource(c,o).then(d.sourceResponse)):t.createSource(n,o).then(d.sourceResponse)},sourceResponse:function(t){if(t.error)return e(document.body).trigger("stripeError",t);d.reset(),d.form.append(e('<input type="hidden" />').addClass("stripe-source").attr("name","stripe_source").val(t.source.id)),e("form#add_payment_method").length&&e(d.form).off("submit",d.form.onSubmit),d.form.submit()},onSubmit:function(){return!d.isStripeChosen()||(!(!d.isStripeSaveCardChosen()&&!d.hasSource())||(!!(d.isBancontactChosen()||d.isGiropayChosen()||d.isIdealChosen()||d.isAlipayChosen()||d.isSofortChosen()||d.isP24Chosen()||d.isEpsChosen()||d.isMultibancoChosen())||(d.block(),d.createSource(),!1)))},onCCFormChange:function(){d.reset()},reset:function(){e(".wc-stripe-error, .stripe-source").remove()},onSepaError:function(t){var n=d.getSelectedPaymentElement().parents("li").eq(0).find(".stripe-source-errors");if(!t.error)return e(n).html("");console.log(t.error.message),e(n).html('<ul class="woocommerce_error woocommerce-error wc-stripe-error"><li /></ul>'),e(n).find("li").text(t.error.message)},getCardReview:function(o){if(e("#payment_method_stripe:checked").length>0)if(e('input[name="wc-stripe-payment-token"]:checked').length>0&&"new"!=e('input[name="wc-stripe-payment-token"]:checked').val()){var r=e('input[name="wc-stripe-payment-token"]:checked'),i=r.closest(".woocommerce-SavedPaymentMethods-token").find(".card-info .card-type").text(),a=r.closest(".woocommerce-SavedPaymentMethods-token").find(".card-info .last4").text();e(".card-number-hidden").removeClass("d-none"),e(".card-number-show").removeClass("d-none"),e(".card-number-image").addClass(i),e(".card-number-show").html(a),d.getBillingAddress(),d.closeSection()}else{var s=d.getOwnerDetails();d.isSepaChosen()&&(s.currency=e("#stripe-sepa_debit-payment-data").data("currency"),s.mandate={notification_method:wc_stripe_params.sepa_mandate_notification},s.type="sepa_debit",t.createSource(c,s).then(d.sourceResponse)),t.createSource(n,s).then((function(t){t.source&&t.source.card&&(e(".card-number-hidden").removeClass("d-none"),e(".card-number-show").removeClass("d-none"),e(".card-number-image").addClass(t.source.card.brand),e(".card-number-show").html(t.source.card.last4),d.getBillingAddress(),d.closeSection())}))}else e("#payment_method_afterpay:checked").length>0?(e(".card-number-image").addClass("afterpay"),d.getBillingAddress(),d.closeSection()):(e(".card-number-image").addClass("paypal"),e(".card-number-hidden").addClass("d-none"),e(".card-number-show").addClass("d-none"),d.getBillingAddress(),d.closeSection())},handleCheckoutNextStep:function(t,n,o){t.addClass("is-checked"),e(".pace-checkout-steps__item.is-checked").last().next().find(".pace-checkout-steps__body").slideDown(300),n.slideUp(300),o.slideDown(300)},getBillingAddress:function(t){if(e("#checkout-billing-address:checked").length>0){var n=e("#shipping_first_name").val(),o=e("#shipping_last_name").val(),r=e("#shipping_company").val(),i=e("#shipping_phone").val(),a=e("#shipping_address_1").val(),s=(e("#shipping_address_2").val(),e("#shipping_city").val()),c=e("#shipping_postcode").val(),d=e("#shipping_state :selected").text();if(e("#shipping_country").is("input"))var l=e("#shipping_country").closest(".woocommerce-input-wrapper").find("strong").text();else l=e("#shipping_country :selected").text()}else{n=e("#billing_first_name").val(),o=e("#billing_last_name").val(),r=e("#billing_company").val(),i=e("#billing_phone").val(),a=e("#billing_address_1").val(),e("#billing_address_2").val(),s=e("#billing_city").val(),c=e("#billing_postcode").val(),d=e("#billing_state :selected").text();if(e("#billing_country").is("input"))l=e("#billing_country").closest(".woocommerce-input-wrapper").find("strong").text();else l=e("#billing_country :selected").text()}var p=a+(a.length>0?", ":"")+s+(s.length>0?", ":"")+d+(d.length>0&&c.length<1?", ":" ")+c+(c.length>0?", ":"")+l,m=n+" "+o;e("#billing-review").html(m+(r.length>0?"<br>"+r:r)+"<br>"+p+"<br>"+i)},closeSection:function(t){var n=e("#check-stripe-payment-method").closest(".pace-checkout-steps__item"),o=e(".pace-checkout-steps__form",n),r=e(".pace-checkout-steps__data",n),i=0;e("#checkout-billing-address:checked").length<1&&(i=0,e('.pace-checkout-steps__item[data-type="payment-billing"] .validate-required').length>0&&e('.pace-checkout-steps__item[data-type="payment-billing"] .validate-required').each((function(){var t=e(this);i=e.validateInput(t,i)}))),i>0||d.handleCheckoutNextStep(n,o,r)},onError:function(t,n){var o,r=n.error.message,i=d.getSelectedPaymentElement().closest("li"),a=i.find(".woocommerce-SavedPaymentMethods-tokenInput");if(a.length){var s=a.filter(":checked");o=s.closest(".woocommerce-SavedPaymentMethods-new").length?e("#wc-stripe-cc-form .stripe-source-errors"):s.closest("li").find(".stripe-source-errors")}else o=i.find(".stripe-source-errors");if(d.isSepaChosen()&&"invalid_owner_name"===n.error.code&&wc_stripe_params.hasOwnProperty(n.error.code)){var c='<ul class="woocommerce-error"><li /></ul>';return c.find("li").text(wc_stripe_params[n.error.code]),d.submitError(c)}"email_invalid"===n.error.code?r=wc_stripe_params.email_invalid:"invalid_request_error"!==n.error.type&&"api_connection_error"!==n.error.type&&"api_error"!==n.error.type&&"authentication_error"!==n.error.type&&"rate_limit_error"!==n.error.type||(r=wc_stripe_params.invalid_request_error),"card_error"===n.error.type&&wc_stripe_params.hasOwnProperty(n.error.code)&&(r=wc_stripe_params[n.error.code]),"validation_error"===n.error.type&&wc_stripe_params.hasOwnProperty(n.error.code)&&(r=wc_stripe_params[n.error.code]),d.reset(),e(".woocommerce-NoticeGroup-checkout").remove(),console.log(n.error.message),e(o).html('<ul class="woocommerce_error woocommerce-error wc-stripe-error"><li/></ul>'),e(o).find("li").text(r),e(".wc-stripe-error").length&&e("html, body").animate({scrollTop:e(".wc-stripe-error").offset().top-200},200),d.unblock(),e.unblockUI()},submitError:function(t){console.log(t),e(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),d.form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+t+"</div>"),d.form.removeClass("processing").unblock(),d.form.find(".input-text, select, input:checkbox").blur();var n="";e("#add_payment_method").length&&(n=e("#add_payment_method")),e("#order_review").length&&(n=e("#order_review")),e("form.checkout").length&&(n=e("form.checkout")),n.length&&e("html, body").animate({scrollTop:n.offset().top-100},500),e(document.body).trigger("checkout_error"),d.unblock()},onHashChange:function(){var e=window.location.hash.match(/^#?confirm-(pi|si)-([^:]+):(.+)$/);if(e&&!(4>e.length)){var t=e[1],n=e[2],o=decodeURIComponent(e[3]);window.location.hash="",d.openIntentModal(n,o,!1,"si"===t)}},maybeConfirmIntent:function(){if(e("#stripe-intent-id").length&&e("#stripe-intent-return").length){var t=e("#stripe-intent-id").val(),n=e("#stripe-intent-return").val();d.openIntentModal(t,n,!0,!1)}},openIntentModal:function(n,o,r,i){t[i?"handleCardSetup":"handleCardPayment"](n).then((function(e){if(e.error)throw e.error;var t=e[i?"setupIntent":"paymentIntent"];"requires_capture"!==t.status&&"succeeded"!==t.status||(window.location=o)})).catch((function(t){if(r)return window.location=o;e(document.body).trigger("stripeError",{error:t}),d.form&&d.form.removeClass("processing"),e.get(o+"&is_ajax")}))},onEarlyRenewalSubmit:function(t){return t.prepacetDefault(),e.ajax({url:e("#early_renewal_modal_submit").attr("href"),method:"get",success:function(t){var n=e.parseJSON(t);n.stripe_sca_required?d.openIntentModal(n.intent_secret,n.redirect_url,!0,!1):window.location=n.redirect_url}}),!1}};d.init()}})),function(e){e.validateInput=function(t,n){var o=e(t).find(".woocommerce-input-wrapper"),r=e(t).find("input"),i=e(t).find("select"),a=e(t).find("label").clone().children().remove().end().text(),s=e(t).find(".invalid-message");if(r.val()||i.val()){if(o.removeClass("pace-form-group--error"),s.remove(),"shipping_email"==r.attr("id")||"billing_email"==r.attr("id")){/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r.val())||(o.hasClass("pace-form-group--error")||o.append('<div class="invalid-message">Please enter a valid email address.</div>'),o.addClass("pace-form-group--error"),n=parseInt(n)+1)}"shipping_phone"!=r.attr("id")&&"billing_phone"!=r.attr("id")||isNaN(r.val())&&(o.hasClass("pace-form-group--error")||o.append('<div class="invalid-message">Please enter a valid phone number.</div>'),o.addClass("pace-form-group--error"),n=parseInt(n)+1)}else o.hasClass("pace-form-group--error")||o.append('<div class="invalid-message">'+a+"is required</div>"),o.addClass("pace-form-group--error"),n=parseInt(n)+1;return n},e((function(){}))}(jQuery);